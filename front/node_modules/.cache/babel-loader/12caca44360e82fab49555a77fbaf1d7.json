{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/imang/Music/ECOMMERCE/front/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/imang/Music/ECOMMERCE/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{shippingAction}from'../ShipReducer';import axios from'axios';export var addShipping=function addShipping(address,city,phoneNumber,postalCode,Country){return function(dispatch){var data={address:address,city:city,phoneNumber:phoneNumber,postalCode:postalCode,Country:Country};dispatch(shippingAction.AddShipping(data));localStorage.setItem('ship',JSON.stringify(data));};};// rating,comment,productId\nexport var newRev=function newRev(id,rating,comment){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,useState){var productId,token,config,_yield$axios$put,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:productId=id;token=JSON.parse(localStorage.getItem('token'));config={headers:{'Content-Type':'application/json',Authorization:token?\"Bearer \".concat(token):''}};_context.prev=3;_context.next=6;return axios.put('/v1/api/amazona/products/reviews',{productId:productId,rating:rating,comment:comment},config);case 6:_yield$axios$put=_context.sent;data=_yield$axios$put.data;dispatch(shippingAction.newReview(data));_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](3);console.log(_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message);dispatch(shippingAction.reviewFail(_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message));case 15:case\"end\":return _context.stop();}}},_callee,null,[[3,11]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/imang/music/ecommerce/front/src/Store/Actions/ShipAction.js"],"names":["shippingAction","axios","addShipping","address","city","phoneNumber","postalCode","Country","dispatch","data","AddShipping","localStorage","setItem","JSON","stringify","newRev","id","rating","comment","useState","productId","token","parse","getItem","config","headers","Authorization","put","newReview","console","log","response","message","reviewFail"],"mappings":"2OAAA,OAAQA,cAAR,KAA6B,gBAA7B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAKA,MAAO,IAAMC,CAAAA,WAAW,CAAE,QAAbA,CAAAA,WAAa,CAACC,OAAD,CAASC,IAAT,CAAcC,WAAd,CAA0BC,UAA1B,CAAqCC,OAArC,CAAgD,CACtE,MAAO,UAAAC,QAAQ,CAAG,CACd,GAAMC,CAAAA,IAAI,CAAG,CAACN,OAAO,CAAPA,OAAD,CAASC,IAAI,CAAJA,IAAT,CAAcC,WAAW,CAAXA,WAAd,CAA0BC,UAAU,CAAVA,UAA1B,CAAqCC,OAAO,CAAPA,OAArC,CAAb,CACAC,QAAQ,CAACR,cAAc,CAACU,WAAf,CAA2BD,IAA3B,CAAD,CAAR,CAEAE,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA4BC,IAAI,CAACC,SAAL,CAAeL,IAAf,CAA5B,EACH,CALD,CAMH,CAPM,CAYP;AAGA,MAAO,IAAMM,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,EAAD,CAAIC,MAAJ,CAAWC,OAAX,CAAqB,CACvC,+FAAO,iBAAMV,QAAN,CAAeW,QAAf,mKAEGC,SAFH,CAEeJ,EAFf,CAKEK,KALF,CAKUR,IAAI,CAACS,KAAL,CAAWX,YAAY,CAACY,OAAb,CAAqB,OAArB,CAAX,CALV,CAOEC,MAPF,CAOU,CACbC,OAAO,CAAC,CACJ,eAAgB,kBADZ,CAEJC,aAAa,CAAEL,KAAK,kBAAaA,KAAb,EAAuB,EAFvC,CADK,CAPV,uCAgBkBpB,CAAAA,KAAK,CAAC0B,GAAN,CAAU,kCAAV,CAA6C,CAACP,SAAS,CAATA,SAAD,CAAWH,MAAM,CAANA,MAAX,CAAkBC,OAAO,CAAPA,OAAlB,CAA7C,CAAwEM,MAAxE,CAhBlB,uCAgBIf,IAhBJ,kBAgBIA,IAhBJ,CAmBHD,QAAQ,CAACR,cAAc,CAAC4B,SAAf,CAAyBnB,IAAzB,CAAD,CAAR,CAnBG,iFAsBHoB,OAAO,CAACC,GAAR,CAAY,YAAIC,QAAJ,EAAgB,YAAIA,QAAJ,CAAatB,IAAb,CAAkBuB,OAAlC,CACN,YAAID,QAAJ,CAAatB,IAAb,CAAkBuB,OADZ,CAEN,YAAIA,OAFV,EAGAxB,QAAQ,CAACR,cAAc,CAACiC,UAAf,CAA0B,YAAIF,QAAJ,EAAgB,YAAIA,QAAJ,CAAatB,IAAb,CAAkBuB,OAAlC,CAC7B,YAAID,QAAJ,CAAatB,IAAb,CAAkBuB,OADW,CAE7B,YAAIA,OAFD,CAAD,CAAR,CAzBG,qEAAP,mEA8BH,CA/BM","sourcesContent":["import {shippingAction} from '../ShipReducer'\r\nimport axios from 'axios'\r\n\r\n\r\n\r\n\r\nexport const addShipping =(address,city,phoneNumber,postalCode,Country) =>{\r\n    return dispatch =>{\r\n        const data = {address,city,phoneNumber,postalCode,Country}\r\n        dispatch(shippingAction.AddShipping(data))\r\n\r\n        localStorage.setItem('ship',JSON.stringify(data))\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n// rating,comment,productId\r\n\r\n\r\nexport const newRev = (id,rating,comment)=>{\r\n    return async(dispatch,useState) =>{\r\n\r\n        const productId = id;\r\n\r\n\r\n       const token = JSON.parse(localStorage.getItem('token'))\r\n\r\n       const config ={\r\n        headers:{\r\n            'Content-Type': 'application/json',\r\n            Authorization: token ? `Bearer ${token}` : ''\r\n        }\r\n    }\r\n\r\n    try{\r\n\r\n        const {data} = await axios.put('/v1/api/amazona/products/reviews',{productId,rating,comment},config)\r\n        \r\n\r\n        dispatch(shippingAction.newReview(data))\r\n\r\n    }catch(err){\r\n        console.log(err.response && err.response.data.message\r\n            ? err.response.data.message\r\n            : err.message)\r\n        dispatch(shippingAction.reviewFail(err.response && err.response.data.message\r\n            ? err.response.data.message\r\n            : err.message))\r\n    }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}