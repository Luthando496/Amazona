{"ast":null,"code":"import axios from 'axios';\nimport { authAction } from '../userReducder';\nexport const login = (email, password) => {\n  return async dispatch => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n\n    try {\n      const {\n        data\n      } = await axios.post(`/v1/api/amazona/users/login`, {\n        email,\n        password\n      }, config);\n      console.log(data);\n      localStorage.setItem('token', JSON.stringify(data.token));\n      dispatch(authAction.userLogin(data));\n      dispatch(authAction.tokes(data.token));\n    } catch (err) {\n      console.log(err.response && err.response.data.message ? err.response.data.message : err.message);\n      dispatch(authAction.userFail(err.response && err.response.data.message ? err.response.data.message : err.message));\n    }\n  };\n};\nexport const register = userData => {\n  return async dispatch => {\n    console.log(userData);\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n\n    try {\n      const {\n        data\n      } = await axios.post(`/v1/api/amazona/users/user-reg`, userData, config);\n      console.log(data);\n      localStorage.setItem('token', JSON.stringify(data.token));\n      dispatch(authAction.userLogin(data));\n    } catch (err) {\n      console.log(err.response && err.response.data.message ? err.response.data.message : err.message);\n      dispatch(authAction.userFail(err.response && err.response.data.message ? err.response.data.message : err.message));\n    }\n  };\n};\nexport const logout = () => {\n  return async dispatch => {\n    try {\n      const {\n        data\n      } = await axios.get(`/v1/api/amazona/users/logout`);\n      console.log(data);\n      dispatch(authAction.userLogout());\n      localStorage.removeItem('token');\n    } catch (err) {\n      console.log(err.response && err.response.data.message ? err.response.data.message : err.message);\n      dispatch(authAction.userFail(err.response && err.response.data.message ? err.response.data.message : err.message));\n    }\n  };\n};\nexport const getMe = () => {\n  return async (dispatch, useState) => {\n    const token = JSON.parse(localStorage.getItem('token'));\n    console.log(token);\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: token ? `Bearer ${token}` : ''\n      }\n    };\n\n    try {\n      const {\n        data\n      } = await axios.get(`/v1/api/amazona/users/profile`, config);\n      console.log(data);\n      dispatch(authAction.loadUser(data));\n    } catch (err) {\n      console.log(err.response && err.response.data.message ? err.response.data.message : err.message);\n      dispatch(authAction.loadUserFail(err.response && err.response.data.message ? err.response.data.message : err.message));\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/imang/music/ecommerce/front/src/Store/Actions/authActions.js"],"names":["axios","authAction","login","email","password","dispatch","config","headers","data","post","console","log","localStorage","setItem","JSON","stringify","token","userLogin","tokes","err","response","message","userFail","register","userData","logout","get","userLogout","removeItem","getMe","useState","parse","getItem","Authorization","loadUser","loadUserFail"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport {authAction} from '../userReducder'\r\n\r\n\r\n\r\nexport const login = (email,password)=>{\r\n    return async dispatch=>{\r\n\r\n\r\n        const config ={\r\n            headers:{\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n        try {\r\n\r\n            const {data} = await axios.post(`/v1/api/amazona/users/login`,{email,password},config)\r\n\r\n            console.log(data)\r\n            localStorage.setItem('token',JSON.stringify(data.token))\r\n\r\n            dispatch(authAction.userLogin(data))\r\n            \r\n            dispatch(authAction.tokes(data.token))\r\n\r\n        }catch(err){\r\n            console.log(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message)\r\n            dispatch(authAction.userFail(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message))\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport const register = (userData)=>{\r\n    return async dispatch=>{\r\n\r\n\r\n        console.log(userData)\r\n\r\n\r\n        const config ={\r\n            headers:{\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n        try {\r\n\r\n            const {data} = await axios.post(`/v1/api/amazona/users/user-reg`,userData,config)\r\n\r\n            console.log(data)\r\n\r\n            localStorage.setItem('token',JSON.stringify(data.token))\r\n\r\n            dispatch(authAction.userLogin(data))\r\n\r\n\r\n        }catch(err){\r\n            console.log(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message)\r\n            dispatch(authAction.userFail(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message))\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const logout = ()=>{\r\n    return async (dispatch)=>{\r\n\r\n        try{\r\n\r\n            const {data} = await axios.get(`/v1/api/amazona/users/logout`)\r\n\r\n            console.log(data)\r\n            dispatch(authAction.userLogout())\r\n            localStorage.removeItem('token')\r\n\r\n        }catch(err){\r\n            console.log(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message)\r\n            dispatch(authAction.userFail(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message))\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nexport const getMe = ()=>{\r\n    return async (dispatch,useState)=>{\r\n\r\n       const token = JSON.parse(localStorage.getItem('token'))\r\n\r\n\r\n        console.log(token)\r\n\r\n\r\n\r\n        const config ={\r\n            headers:{\r\n                'Content-Type': 'application/json',\r\n                Authorization: token ? `Bearer ${token}` : ''\r\n            }\r\n        }\r\n\r\n\r\n\r\n        try {\r\n\r\n            const {data} = await axios.get(`/v1/api/amazona/users/profile`,config)\r\n\r\n            console.log(data)\r\n\r\n\r\n            dispatch(authAction.loadUser(data))\r\n\r\n\r\n        }catch(err){\r\n            console.log(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message)\r\n            dispatch(authAction.loadUserFail(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message))\r\n        }\r\n\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}