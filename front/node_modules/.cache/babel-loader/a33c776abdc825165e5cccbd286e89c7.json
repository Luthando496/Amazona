{"ast":null,"code":"import { productAction, detailsAction } from '../store';\nimport axios from 'axios';\nexport const getproducts = function () {\n  let keyword = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  let currentPage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  let price = arguments.length > 2 ? arguments[2] : undefined;\n  let category = arguments.length > 3 ? arguments[3] : undefined;\n  return async dispacth => {\n    try {\n      console.log(keyword);\n      let link = `/v1/api/amazona/products?keyword=${keyword}&page=${currentPage}&price=[lte]=${price[1]}&price[gte]=${price[0]}`;\n\n      if (category) {\n        link = `/v1/api/amazona/products?keyword=${keyword}&page=${currentPage}&price=[lte]=${price[1]}&price[gte]=${price[0]}&category=${category}`;\n      }\n\n      const {\n        data\n      } = await axios.get(link);\n      dispacth(productAction.ProductsSuccess(data));\n    } catch (err) {\n      console.log(err);\n      dispacth(productAction.ProductsFail(err || err.response || err.response.data));\n    }\n  };\n};\nexport const productDetails = id => async dispacth => {\n  // dispacth(detailsAction.allProductsRequest())\n  try {\n    const {\n      data\n    } = await axios.get(`/v1/api/amazona/single-product/${id}`);\n    dispacth(detailsAction.ProductDetailsSuccess(data.product));\n  } catch (err) {\n    console.log(err);\n    dispacth(detailsAction.ProductsDetailsFail(err || err.response || err.response.data));\n  }\n};\nexport const newProduct = productData => {\n  return async (dispatch, useState) => {\n    const token = JSON.parse(localStorage.getItem('token'));\n    console.log(token);\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: token ? `Bearer ${token}` : ''\n      }\n    };\n\n    try {\n      const {\n        data\n      } = await axios.get(`/v1/api/amazona/users/upload`, productData, config);\n      console.log(data);\n      dispatch(productAction.newProduct(data));\n    } catch (err) {\n      console.log(err.response && err.response.data.message ? err.response.data.message : err.message);\n      dispatch(productAction.newProdFail(err.response && err.response.data.message ? err.response.data.message : err.message));\n    }\n  };\n};\n\nconst setImage = formData => async dispacth => {\n  try {\n    const {\n      data\n    } = await axios.post('/v1/api/amazona/users/uploader', formData, config);\n    productAction.newPhoto(data);\n    console.log(image.url);\n  } catch (err) {\n    console.log(err);\n  }\n};","map":{"version":3,"sources":["C:/Users/imang/music/ecommerce/front/src/Store/Actions/ProductsActions.js"],"names":["productAction","detailsAction","axios","getproducts","keyword","currentPage","price","category","dispacth","console","log","link","data","get","ProductsSuccess","err","ProductsFail","response","productDetails","id","ProductDetailsSuccess","product","ProductsDetailsFail","newProduct","productData","dispatch","useState","token","JSON","parse","localStorage","getItem","config","headers","Authorization","message","newProdFail","setImage","formData","post","newPhoto","image","url"],"mappings":"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","sourcesContent":["import {productAction,detailsAction} from '../store'\r\nimport axios from 'axios'\r\n\r\n\r\nexport const getproducts = (keyword = '',currentPage=1,price,category) =>\r\n    async dispacth =>{\r\n        try{\r\n\r\n            console.log(keyword)\r\n\r\n            let link = `/v1/api/amazona/products?keyword=${keyword}&page=${currentPage}&price=[lte]=${price[1]}&price[gte]=${price[0]}`\r\n\r\n            if(category){\r\n                link = `/v1/api/amazona/products?keyword=${keyword}&page=${currentPage}&price=[lte]=${price[1]}&price[gte]=${price[0]}&category=${category}` \r\n\r\n            }\r\n\r\n            const {data} = await axios.get(link)\r\n\r\n\r\n\r\n            dispacth(productAction.ProductsSuccess(data))\r\n\r\n\r\n\r\n        }catch(err){\r\n            console.log(err)\r\n            dispacth(productAction.ProductsFail(err || err.response || err.response.data))\r\n        }\r\n}\r\n\r\n\r\n\r\n\r\nexport const productDetails = (id) =>\r\n    async dispacth =>{\r\n\r\n        // dispacth(detailsAction.allProductsRequest())\r\n        try{\r\n\r\n            const {data} = await axios.get(`/v1/api/amazona/single-product/${id}`) \r\n\r\n\r\n            dispacth(detailsAction.ProductDetailsSuccess(data.product))\r\n\r\n\r\n\r\n        }catch(err){\r\n            console.log(err)\r\n            dispacth(detailsAction.ProductsDetailsFail(err || err.response || err.response.data))\r\n        }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const newProduct = (productData)=>{\r\n    return async (dispatch,useState)=>{\r\n\r\n       const token = JSON.parse(localStorage.getItem('token'))\r\n\r\n\r\n        console.log(token)\r\n\r\n\r\n\r\n        const config ={\r\n            headers:{\r\n                'Content-Type': 'application/json',\r\n                Authorization: token ? `Bearer ${token}` : ''\r\n            }\r\n        }\r\n\r\n\r\n\r\n        try {\r\n\r\n            const {data} = await axios.get(`/v1/api/amazona/users/upload`,productData,config)\r\n\r\n            console.log(data)\r\n\r\n\r\n            dispatch(productAction.newProduct(data))\r\n\r\n\r\n        }catch(err){\r\n            console.log(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message)\r\n            dispatch(productAction.newProdFail(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message))\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst setImage = (formData) => async dispacth=>{\r\n    \r\n\r\n\r\n    try{\r\n\r\n      const {data} = await axios.post('/v1/api/amazona/users/uploader',formData,config)\r\n      \r\n      productAction.newPhoto(data)\r\n      \r\n      console.log(image.url)\r\n\r\n    }catch(err){\r\n      console.log(err)\r\n    }\r\n    \r\n}\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}