{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/imang/Music/ECOMMERCE/front/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"C:/Users/imang/Music/ECOMMERCE/front/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"C:/Users/imang/Music/ECOMMERCE/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/imang/Music/ECOMMERCE/front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{register}from'../Store/Actions/authActions';import{useDispatch,useSelector}from'react-redux';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(){var dispatch=useDispatch();var navigate=useNavigate();var _useSelector=useSelector(function(state){return state.auth;}),isAuth=_useSelector.isAuth;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),avatar=_useState8[0],setAvatar=_useState8[1];useEffect(function(){if(isAuth){navigate('/');}});var setImage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file,formData,config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:file=e.target.files[0];formData=new FormData();formData.append('avatar',file);console.log(_toConsumableArray(formData));config={headers:{'Content-type':'application/json'}};_context.prev=5;_context.next=8;return axios.post('/v1/api/amazona/users/upload',formData,config);case 8:_yield$axios$post=_context.sent;data=_yield$axios$post.data;console.log(data);setAvatar(data);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](5);console.log(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[5,14]]);}));return function setImage(_x){return _ref.apply(this,arguments);};}();var Submit=function Submit(e){e.preventDefault();var userData={name:name,email:email,password:password,avatar:avatar};dispatch(register(userData));};return/*#__PURE__*/_jsx(\"div\",{className:\"container container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 col-lg-5\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"shadow-lg\",encType:\"multipart/form-data\",onSubmit:Submit,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-3\",children:\"Register\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",id:\"name_field\",className:\"form-control\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email_field\",className:\"form-control\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password_field\",className:\"form-control\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"figure\",{className:\"avatar mr-3 item-rtl\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\",className:\"rounded-circle\",alt:\"image\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-file\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",className:\"custom-file-input\",id:\"customFile\",onChange:setImage}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-file-label\",children:\"Choose Avatar\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{id:\"register_button\",type:\"submit\",className:\"btn btn-block py-3\",onSubmit:Submit,children:\"REGISTER\"})]})})})});};export default Register;","map":{"version":3,"sources":["C:/Users/imang/music/ecommerce/front/src/Components/Register.js"],"names":["React","useState","useEffect","register","useDispatch","useSelector","axios","useNavigate","Register","dispatch","navigate","state","auth","isAuth","password","setPassword","email","setEmail","name","setName","avatar","setAvatar","setImage","e","file","target","files","formData","FormData","append","console","log","config","headers","post","data","Submit","preventDefault","userData","value"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport {register} from '../Store/Actions/authActions'\r\nimport {useDispatch,useSelector} from 'react-redux'\r\nimport axios from 'axios'\r\nimport {useNavigate} from 'react-router-dom'\r\n\r\n\r\nconst Register = () => {\r\n\r\n  const dispatch = useDispatch()\r\n  let navigate = useNavigate()\r\n\r\n  const {isAuth} = useSelector(state=>state.auth)\r\n\r\n\r\n\r\n    \r\n    const [password,setPassword] = useState('')\r\n    const [email,setEmail] = useState('')\r\n    const [name,setName] = useState('')\r\n    const [avatar,setAvatar] = useState('')\r\n\r\n    useEffect(() => {\r\n      if(isAuth) {\r\n          navigate('/')\r\n      }\r\n\r\n  })\r\n\r\n\r\n    const setImage = async(e)=>{\r\n        const file = e.target.files[0];\r\n\r\n        let formData = new FormData()\r\n        formData.append('avatar', file)\r\n        console.log([...formData])\r\n\r\n\r\n        const config ={\r\n          headers:{\r\n              'Content-type':'application/json',\r\n          }\r\n      }\r\n\r\n\r\n        try{\r\n\r\n          const {data} = await axios.post('/v1/api/amazona/users/upload',formData,config)\r\n          console.log(data)\r\n\r\n          setAvatar(data)\r\n\r\n\r\n        }catch(err){\r\n          console.log(err)\r\n        }\r\n        \r\n    } \r\n\r\n    const Submit = (e)=>{\r\n      e.preventDefault()\r\n\r\n      \r\n\r\n      const userData = {name,email,password,avatar}\r\n      dispatch(register(userData))\r\n    }\r\n\r\n    return (\r\n        <div className=\"container container-fluid\">\r\n        <div className=\"row wrapper\">\r\n\t\t<div className=\"col-10 col-lg-5\">\r\n        <form className=\"shadow-lg\" encType='multipart/form-data' onSubmit={Submit}>\r\n            <h1 className=\"mb-3\">Register</h1>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Name</label>\r\n            <input type=\"name\" id=\"name_field\" className=\"form-control\" value={name} onChange={e => setName(e.target.value)} />\r\n          </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label >Email</label>\r\n              <input\r\n                type=\"email\"\r\n                id=\"email_field\"\r\n                className=\"form-control\"\r\n                value={email} onChange={e => setEmail(e.target.value)}\r\n              />\r\n            </div>\r\n  \r\n            <div className=\"form-group\">\r\n              <label >Password</label>\r\n              <input\r\n                type=\"password\"\r\n                id=\"password_field\"\r\n                className=\"form-control\"\r\n                value={password} onChange={e => setPassword(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className='form-group'>\r\n              <label >Avatar</label>\r\n              <div className='d-flex align-items-center'>\r\n                  <div>\r\n                      <figure className='avatar mr-3 item-rtl'>\r\n                          <img\r\n                              src=\"\"\r\n                              className='rounded-circle'\r\n                              alt='image'\r\n                          />\r\n                      </figure>\r\n                  </div>\r\n                  <div className='custom-file'>\r\n                      <input\r\n                          type='file'\r\n                          name='avatar'\r\n                          className='custom-file-input'\r\n                          id='customFile'\r\n                          onChange={setImage}\r\n                      />\r\n                      <label className='custom-file-label' >\r\n                          Choose Avatar\r\n                      </label>\r\n                  </div>\r\n              </div>\r\n          </div>\r\n  \r\n            <button\r\n              id=\"register_button\"\r\n              type=\"submit\"\r\n              className=\"btn btn-block py-3\"\r\n              onSubmit={Submit}\r\n            >\r\n              REGISTER\r\n            </button>\r\n          </form>\r\n\t\t  </div>\r\n    </div>\r\n</div>\r\n    )\r\n}\r\n\r\nexport default Register\r\n"]},"metadata":{},"sourceType":"module"}