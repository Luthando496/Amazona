{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/imang/Music/ECOMMERCE/front/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/imang/Music/ECOMMERCE/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{authAction}from'../userReducder';export var login=function login(email,password){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{'Content-Type':'application/json'}};_context.prev=1;_context.next=4;return axios.post(\"/v1/api/amazona/users/login\",{email:email,password:password},config);case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;console.log(data);localStorage.setItem('token',JSON.stringify(data.token));dispatch(authAction.userLogin(data));_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);console.log(_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message);dispatch(authAction.userFail(_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message));case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var register=function register(userData){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,_yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(userData);config={headers:{'Content-Type':'application/json'}};_context2.prev=2;_context2.next=5;return axios.post(\"/v1/api/amazona/users/user-reg\",userData,config);case 5:_yield$axios$post2=_context2.sent;data=_yield$axios$post2.data;console.log(data);localStorage.setItem('token',JSON.stringify(data.token));dispatch(authAction.userLogin(data));_context2.next=16;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0.response&&_context2.t0.response.data.message?_context2.t0.response.data.message:_context2.t0.message);dispatch(authAction.userFail(_context2.t0.response&&_context2.t0.response.data.message?_context2.t0.response.data.message:_context2.t0.message));case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[2,12]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var logout=function logout(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"/v1/api/amazona/users/logout\");case 3:_yield$axios$get=_context3.sent;data=_yield$axios$get.data;console.log(data);dispatch(authAction.userLogout());localStorage.removeItem('token');_context3.next=14;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0.response&&_context3.t0.response.data.message?_context3.t0.response.data.message:_context3.t0.message);dispatch(authAction.userFail(_context3.t0.response&&_context3.t0.response.data.message?_context3.t0.response.data.message:_context3.t0.message));case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var getMe=function getMe(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,useState){var token,config,_yield$axios$get2,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:token=JSON.parse(localStorage.getItem('token'));console.log(token);config={headers:{'Content-Type':'application/json',Authorization:token?\"Bearer \".concat(token):''}};_context4.prev=3;_context4.next=6;return axios.get(\"/v1/api/amazona/users/profile\",config);case 6:_yield$axios$get2=_context4.sent;data=_yield$axios$get2.data;console.log(data);dispatch(authAction.loadUser(data));_context4.next=16;break;case 12:_context4.prev=12;_context4.t0=_context4[\"catch\"](3);console.log(_context4.t0.response&&_context4.t0.response.data.message?_context4.t0.response.data.message:_context4.t0.message);dispatch(authAction.loadUserFail(_context4.t0.response&&_context4.t0.response.data.message?_context4.t0.response.data.message:_context4.t0.message));case 16:case\"end\":return _context4.stop();}}},_callee4,null,[[3,12]]);}));return function(_x4,_x5){return _ref4.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/imang/music/ecommerce/front/src/Store/Actions/authActions.js"],"names":["axios","authAction","login","email","password","dispatch","config","headers","post","data","console","log","localStorage","setItem","JSON","stringify","token","userLogin","response","message","userFail","register","userData","logout","get","userLogout","removeItem","getMe","useState","parse","getItem","Authorization","loadUser","loadUserFail"],"mappings":"2OAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,UAAR,KAAyB,iBAAzB,CAIA,MAAO,IAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAOC,QAAP,CAAkB,CACnC,+FAAO,iBAAMC,QAAN,oJAGGC,MAHH,CAGW,CACVC,OAAO,CAAC,CACJ,eAAgB,kBADZ,CADE,CAHX,uCAUsBP,CAAAA,KAAK,CAACQ,IAAN,+BAAyC,CAACL,KAAK,CAALA,KAAD,CAAOC,QAAQ,CAARA,QAAP,CAAzC,CAA0DE,MAA1D,CAVtB,wCAUQG,IAVR,mBAUQA,IAVR,CAYCC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACAG,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA6BC,IAAI,CAACC,SAAL,CAAeN,IAAI,CAACO,KAApB,CAA7B,EAEAX,QAAQ,CAACJ,UAAU,CAACgB,SAAX,CAAqBR,IAArB,CAAD,CAAR,CAfD,iFAmBCC,OAAO,CAACC,GAAR,CAAY,YAAIO,QAAJ,EAAgB,YAAIA,QAAJ,CAAaT,IAAb,CAAkBU,OAAlC,CACN,YAAID,QAAJ,CAAaT,IAAb,CAAkBU,OADZ,CAEN,YAAIA,OAFV,EAGAd,QAAQ,CAACJ,UAAU,CAACmB,QAAX,CAAoB,YAAIF,QAAJ,EAAgB,YAAIA,QAAJ,CAAaT,IAAb,CAAkBU,OAAlC,CACvB,YAAID,QAAJ,CAAaT,IAAb,CAAkBU,OADK,CAEvB,YAAIA,OAFD,CAAD,CAAR,CAtBD,qEAAP,+DA4BH,CA7BM,CAmCP,MAAO,IAAME,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,QAAD,CAAY,CAChC,gGAAO,kBAAMjB,QAAN,yJAGHK,OAAO,CAACC,GAAR,CAAYW,QAAZ,EAGMhB,MANH,CAMW,CACVC,OAAO,CAAC,CACJ,eAAgB,kBADZ,CADE,CANX,yCAasBP,CAAAA,KAAK,CAACQ,IAAN,kCAA4Cc,QAA5C,CAAqDhB,MAArD,CAbtB,0CAaQG,IAbR,oBAaQA,IAbR,CAeCC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EAEAG,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA6BC,IAAI,CAACC,SAAL,CAAeN,IAAI,CAACO,KAApB,CAA7B,EAEAX,QAAQ,CAACJ,UAAU,CAACgB,SAAX,CAAqBR,IAArB,CAAD,CAAR,CAnBD,qFAuBCC,OAAO,CAACC,GAAR,CAAY,aAAIO,QAAJ,EAAgB,aAAIA,QAAJ,CAAaT,IAAb,CAAkBU,OAAlC,CACN,aAAID,QAAJ,CAAaT,IAAb,CAAkBU,OADZ,CAEN,aAAIA,OAFV,EAGAd,QAAQ,CAACJ,UAAU,CAACmB,QAAX,CAAoB,aAAIF,QAAJ,EAAgB,aAAIA,QAAJ,CAAaT,IAAb,CAAkBU,OAAlC,CACvB,aAAID,QAAJ,CAAaT,IAAb,CAAkBU,OADK,CAEvB,aAAIA,OAFD,CAAD,CAAR,CA1BD,uEAAP,iEAgCH,CAjCM,CAyCP,MAAO,IAAMI,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAI,CACtB,gGAAO,kBAAOlB,QAAP,wLAIsBL,CAAAA,KAAK,CAACwB,GAAN,gCAJtB,wCAIQf,IAJR,kBAIQA,IAJR,CAMCC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACAJ,QAAQ,CAACJ,UAAU,CAACwB,UAAX,EAAD,CAAR,CACAb,YAAY,CAACc,UAAb,CAAwB,OAAxB,EARD,qFAWChB,OAAO,CAACC,GAAR,CAAY,aAAIO,QAAJ,EAAgB,aAAIA,QAAJ,CAAaT,IAAb,CAAkBU,OAAlC,CACN,aAAID,QAAJ,CAAaT,IAAb,CAAkBU,OADZ,CAEN,aAAIA,OAFV,EAGAd,QAAQ,CAACJ,UAAU,CAACmB,QAAX,CAAoB,aAAIF,QAAJ,EAAgB,aAAIA,QAAJ,CAAaT,IAAb,CAAkBU,OAAlC,CACvB,aAAID,QAAJ,CAAaT,IAAb,CAAkBU,OADK,CAEvB,aAAIA,OAFD,CAAD,CAAR,CAdD,uEAAP,iEAoBH,CArBM,CAwBP,MAAO,IAAMQ,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAI,CACrB,gGAAO,kBAAOtB,QAAP,CAAgBuB,QAAhB,8JAEEZ,KAFF,CAEUF,IAAI,CAACe,KAAL,CAAWjB,YAAY,CAACkB,OAAb,CAAqB,OAArB,CAAX,CAFV,CAKHpB,OAAO,CAACC,GAAR,CAAYK,KAAZ,EAIMV,MATH,CASW,CACVC,OAAO,CAAC,CACJ,eAAgB,kBADZ,CAEJwB,aAAa,CAAEf,KAAK,kBAAaA,KAAb,EAAuB,EAFvC,CADE,CATX,yCAoBsBhB,CAAAA,KAAK,CAACwB,GAAN,iCAA0ClB,MAA1C,CApBtB,yCAoBQG,IApBR,mBAoBQA,IApBR,CAsBCC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EAGAJ,QAAQ,CAACJ,UAAU,CAAC+B,QAAX,CAAoBvB,IAApB,CAAD,CAAR,CAzBD,qFA6BCC,OAAO,CAACC,GAAR,CAAY,aAAIO,QAAJ,EAAgB,aAAIA,QAAJ,CAAaT,IAAb,CAAkBU,OAAlC,CACN,aAAID,QAAJ,CAAaT,IAAb,CAAkBU,OADZ,CAEN,aAAIA,OAFV,EAGAd,QAAQ,CAACJ,UAAU,CAACgC,YAAX,CAAwB,aAAIf,QAAJ,EAAgB,aAAIA,QAAJ,CAAaT,IAAb,CAAkBU,OAAlC,CAC3B,aAAID,QAAJ,CAAaT,IAAb,CAAkBU,OADS,CAE3B,aAAIA,OAFD,CAAD,CAAR,CAhCD,uEAAP,qEAsCH,CAvCM","sourcesContent":["import axios from 'axios'\r\nimport {authAction} from '../userReducder'\r\n\r\n\r\n\r\nexport const login = (email,password)=>{\r\n    return async dispatch=>{\r\n\r\n\r\n        const config ={\r\n            headers:{\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n        try {\r\n\r\n            const {data} = await axios.post(`/v1/api/amazona/users/login`,{email,password},config)\r\n\r\n            console.log(data)\r\n            localStorage.setItem('token',JSON.stringify(data.token))\r\n\r\n            dispatch(authAction.userLogin(data))\r\n            \r\n\r\n        }catch(err){\r\n            console.log(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message)\r\n            dispatch(authAction.userFail(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message))\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport const register = (userData)=>{\r\n    return async dispatch=>{\r\n\r\n\r\n        console.log(userData)\r\n\r\n\r\n        const config ={\r\n            headers:{\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n        try {\r\n\r\n            const {data} = await axios.post(`/v1/api/amazona/users/user-reg`,userData,config)\r\n\r\n            console.log(data)\r\n\r\n            localStorage.setItem('token',JSON.stringify(data.token))\r\n\r\n            dispatch(authAction.userLogin(data))\r\n\r\n\r\n        }catch(err){\r\n            console.log(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message)\r\n            dispatch(authAction.userFail(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message))\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const logout = ()=>{\r\n    return async (dispatch)=>{\r\n\r\n        try{\r\n\r\n            const {data} = await axios.get(`/v1/api/amazona/users/logout`)\r\n\r\n            console.log(data)\r\n            dispatch(authAction.userLogout())\r\n            localStorage.removeItem('token')\r\n\r\n        }catch(err){\r\n            console.log(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message)\r\n            dispatch(authAction.userFail(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message))\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nexport const getMe = ()=>{\r\n    return async (dispatch,useState)=>{\r\n\r\n       const token = JSON.parse(localStorage.getItem('token'))\r\n\r\n\r\n        console.log(token)\r\n\r\n\r\n\r\n        const config ={\r\n            headers:{\r\n                'Content-Type': 'application/json',\r\n                Authorization: token ? `Bearer ${token}` : ''\r\n            }\r\n        }\r\n\r\n\r\n\r\n        try {\r\n\r\n            const {data} = await axios.get(`/v1/api/amazona/users/profile`,config)\r\n\r\n            console.log(data)\r\n\r\n\r\n            dispatch(authAction.loadUser(data))\r\n\r\n\r\n        }catch(err){\r\n            console.log(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message)\r\n            dispatch(authAction.loadUserFail(err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message))\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}